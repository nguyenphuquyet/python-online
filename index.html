<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>NGUYENPHUQUYET - PYTHON ONLINE</title>

<meta name="description" content="Ch·∫°y code python online kh√¥ng c·∫ßn c√†i app">
<meta property="og:title" content="NGUYENPHUQUYET - PYTHON ONLINE">
<meta property="og:description" content="Ch·∫°y code python online kh√¥ng c·∫ßn c√†i app">
<meta property="og:image" content="https://i.ibb.co/mCY28Dxr/Zp-Bxd-R5-Le-NNTx-Et-H-ZDIw-ODc5-ZDQt-Nm-Nl-NC00-Nj-Vm-LTg0-Zm-Qt-ZDBj-N2-Iz-YTEx-OTVl-oxylabs-images-05.webp">

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>

<style>
html, body { height: 100%; }
textarea { overflow: hidden; }

.theme-active {
  outline: 2px solid #22c55e;
  outline-offset: 2px;
}

#overlay.hidden {
  pointer-events: none;
}
  
  /* MOBILE KEYBOARD FIX */
#inputBar {
  position: relative;
  z-index: 20;
  transition: transform 0.2s ease;
}
</style>
</head>

<body class="h-[100dvh] overflow-hidden bg-black text-green-400">

<div class="flex flex-col h-full">

<!-- HEADER -->
<div id="header" class="flex items-center justify-between px-4 py-2 border-b text-sm font-mono">
  <div>Python 3.11 ‚Äî Browser REPL</div>
  <button id="settingsBtn">‚öôÔ∏è</button>
</div>

<!-- TERMINAL -->
<div id="terminal" class="flex-1 overflow-y-auto px-4 py-3 font-mono text-base space-y-1"></div>

<!-- INPUT BAR -->
<div id="inputBar" class="border-t px-4 py-3" onclick="focusInput()">
  <div class="flex items-end gap-2">
    <span id="prompt" class="select-none pt-[2px]">>>> </span>
    <textarea id="input" rows="1"
      class="flex-1 bg-transparent resize-none outline-none font-mono leading-[1.5rem] pt-[2px]"
      placeholder="Nh·∫≠p Python..."></textarea>
    <button id="runBtn"
      class="self-end h-[1.5rem] px-3 rounded-md text-sm font-semibold active:scale-95 transition">
      ‚ñ∂
    </button>
  </div>
</div>

</div>

<div id="overlay" class="fixed inset-0 z-40 hidden"></div>

<!-- SIDEBAR -->
<aside id="sidebar"
  class="fixed top-0 right-0 h-full w-72 translate-x-full transition-transform z-50 flex flex-col">
  <div id="sidebarHeader"
    class="flex items-center justify-between px-4 py-3 border-b text-sm">
    <div>‚öôÔ∏è C√†i ƒë·∫∑t</div>
    <button id="closeSidebar">‚úï</button>
  </div>

  <div id="sidebarBody" class="p-4 space-y-4 text-sm">
    <div>
      <div class="mb-2 font-medium">Theme</div>
      <div class="grid grid-cols-2 gap-2">
        <button data-theme="hacker" class="themeBtn px-3 py-2 rounded">Hacker</button>
        <button data-theme="dark" class="themeBtn px-3 py-2 rounded">Dark</button>
        <button data-theme="light" class="themeBtn px-3 py-2 rounded">Light</button>
        <button data-theme="midnight" class="themeBtn px-3 py-2 rounded">Midnight</button>
      </div>
    </div>

    <div id="credit" class="text-xs border-t pt-3">
      Ph√°t tri·ªÉn b·ªüi Nguy·ªÖn Ph√∫ Quy·∫øt
    </div>
  </div>
</aside>

<script>
/* ELEMENTS */
const terminal = document.getElementById("terminal");
const input = document.getElementById("input");
const runBtn = document.getElementById("runBtn");
const inputBar = document.getElementById("inputBar");
const promptEl = document.getElementById("prompt");
const header = document.getElementById("header");

const settingsBtn = document.getElementById("settingsBtn");
const sidebar = document.getElementById("sidebar");
const sidebarHeader = document.getElementById("sidebarHeader");
const overlay = document.getElementById("overlay");
const closeSidebar = document.getElementById("closeSidebar");
const credit = document.getElementById("credit");
const themeButtons = document.querySelectorAll(".themeBtn");

/* FOCUS FIX */
function focusInput() {
  input.focus({ preventScroll: true });
}

/* TERMINAL */
function printLine(text, type="output") {
  const div = document.createElement("div");
  div.className =
    type === "error"
      ? "text-red-500 whitespace-pre-wrap break-words"
      : "whitespace-pre-wrap break-words";
  div.textContent = text;
  terminal.appendChild(div);
  terminal.scrollTop = terminal.scrollHeight;
}

/* AUTO RESIZE */
function autoResize() {
  input.style.height = "1.5rem";
  input.style.height = input.scrollHeight + "px";
}
input.addEventListener("input", autoResize);

/* PYODIDE */
let pyodide;
async function start() {
  printLine("ƒêang t·∫£i Python...");
  pyodide = await loadPyodide();

  // stdout / stderr
  pyodide.setStdout({ batched: s => s.trim() && printLine(s) });
  pyodide.setStderr({ batched: s => s.trim() && printLine(s, "error") });

  // üîë POPUP INPUT
  pyodide.globals.set("input", (msg = "") => {
    const r = prompt(msg || "Nh·∫≠p d·ªØ li·ªáu:");
    if (r === null) throw new Error("Input cancelled");
    return r;
  });

  terminal.innerHTML = "";
  printLine("Python 3.11 (Pyodide)");
  setTimeout(focusInput, 300);
}
start();

/* RUN CODE */
async function runCode() {
  const code = input.value;
  if (!code.trim()) return;

  input.blur();
  printLine(">>> " + code);

  input.value = "";
  autoResize();

  try {
    const r = await pyodide.runPythonAsync(code);
    if (r !== undefined) printLine(String(r));
  } catch (e) {
    printLine(e.toString(), "error");
  }
}
runBtn.onclick = runCode;

/* SIDEBAR */
settingsBtn.onclick = () => {
  sidebar.classList.remove("translate-x-full");
  overlay.classList.remove("hidden");
};

closeSidebar.onclick = overlay.onclick = () => {
  sidebar.classList.add("translate-x-full");
  overlay.classList.add("hidden");
};

/* THEMES */
const themes = {
  hacker: {
    body: "bg-black text-green-400",
    border: "border-green-700",
    inputBar: "bg-black border-green-700",
    prompt: "text-green-400",
    input: "text-green-400 placeholder-green-600",
    button: "bg-green-600 text-black hover:bg-green-500",
    sidebar: "bg-black text-green-400",
    overlay: "bg-black/50"
  },
  dark: {
    body: "bg-black text-gray-100",
    border: "border-gray-800",
    inputBar: "bg-black border-gray-800",
    prompt: "text-blue-400",
    input: "text-gray-100 placeholder-gray-500",
    button: "bg-blue-600 text-white hover:bg-blue-500",
    sidebar: "bg-black text-gray-100",
    overlay: "bg-black/60"
  },
  light: {
    body: "bg-gray-100 text-gray-900",
    border: "border-gray-300",
    inputBar: "bg-white border-gray-300",
    prompt: "text-blue-600",
    input: "text-gray-900 placeholder-gray-400",
    button: "bg-blue-600 text-white hover:bg-blue-500",
    sidebar: "bg-white text-gray-900",
    overlay: "bg-black/30"
  },
  midnight: {
    body: "bg-slate-950 text-slate-100",
    border: "border-slate-800",
    inputBar: "bg-slate-950 border-slate-800",
    prompt: "text-cyan-400",
    input: "text-slate-100 placeholder-slate-500",
    button: "bg-cyan-600 text-black hover:bg-cyan-500",
    sidebar: "bg-slate-950 text-slate-100",
    overlay: "bg-black/70"
  }
};

function applyTheme(name) {
  const t = themes[name];
  if (!t) return;

  document.body.className = `h-[100dvh] overflow-hidden ${t.body}`;
  header.className = `flex items-center justify-between px-4 py-2 border-b text-sm font-mono ${t.border}`;
  inputBar.className = `border-t px-4 py-3 ${t.inputBar}`;
  promptEl.className = `${t.prompt} select-none pt-[2px]`;
  input.className =
    `flex-1 bg-transparent resize-none outline-none font-mono leading-[1.5rem] pt-[2px] ${t.input}`;
  runBtn.className =
    `self-end h-[1.5rem] px-3 rounded-md text-sm font-semibold active:scale-95 transition ${t.button}`;
  sidebar.className =
    `fixed top-0 right-0 h-full w-72 translate-x-full transition-transform z-50 flex flex-col ${t.sidebar}`;
  sidebarHeader.className =
    `flex items-center justify-between px-4 py-3 border-b text-sm ${t.border}`;
  credit.className = `text-xs border-t pt-3 ${t.border}`;
  overlay.className = `fixed inset-0 z-40 hidden ${t.overlay}`;

  themeButtons.forEach(btn =>
    btn.classList.toggle("theme-active", btn.dataset.theme === name)
  );
  localStorage.setItem("theme", name);
}

themeButtons.forEach(btn =>
  btn.onclick = () => applyTheme(btn.dataset.theme)
);

applyTheme(localStorage.getItem("theme") || "hacker");
</script>

  
  <script>
  /* KEYBOARD AWARE INPUT BAR (MOBILE FIX) */
function updateForKeyboard() {
  if (!window.visualViewport) return;

  const vv = window.visualViewport;
  const keyboardHeight = window.innerHeight - vv.height - vv.offsetTop;

  if (keyboardHeight > 0) {
    inputBar.style.transform = `translateY(-${keyboardHeight}px)`;
  } else {
    inputBar.style.transform = "";
  }
}

// khi viewport thay ƒë·ªïi (b·∫≠t/t·∫Øt b√†n ph√≠m)
if (window.visualViewport) {
  visualViewport.addEventListener("resize", updateForKeyboard);
  visualViewport.addEventListener("scroll", updateForKeyboard);
}

// khi focus / blur input
input.addEventListener("focus", () => {
  setTimeout(updateForKeyboard, 50);
});
input.addEventListener("blur", () => {
  inputBar.style.transform = "";
});
  </script>
  
</body>
</html>